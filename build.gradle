buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.bluepapa32:gradle-watch-plugin:0.1.5'
    }
}

apply plugin: 'com.bluepapa32.watch'

apply plugin: 'java'
apply plugin: 'checkstyle'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.slf4j:slf4j-api:1.7.5'
    testCompile 'junit:junit:4.11'
}

test {
    useJUnit {
        excludeCategories 'category.checkstyle.CheckStyleTests'
    }
}

task testCheckstyle(type: Test, dependsOn: check) {
    useJUnit {
        includeCategories 'category.checkstyle.CheckStyleTests'
    }
}

testCheckstyle.mustRunAfter check

watch {
    java {
        files files('src/main/java')
        tasks 'testCheckstyle'
    }
}
